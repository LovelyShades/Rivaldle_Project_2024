const translations = {
    en: {
        title_header: "GUESS THE MARVEL RIVALS CHARACTER",
        mode_classic: "Classic",
        mode_silhouette: "Silhouette",
        mode_emoji: "Emoji",
        mode_character_ability: "Character Ability",
        
        aboutHeader: "About Us",
        aboutText1: "Rivaldle was created by two computer science students passionate about programming and eager to deepen their skills through a collaborative project. As lifelong Marvel fans, we’ve spent countless hours enjoying Marvel Rivals, which inspired us to develop this trivia game.",
        aboutText2: "We also drew inspiration from Smashdle, an online trivia game based on Super Smash Bros. With Rivaldle, we aim to create an immersive experience for Marvel fans.",
        aboutText3: "Feedback? Email us at",
        
        languageHeader: "Select Your Language",
        languagePrompt: "Choose a language to change the site’s language:",
        english: "English",
        spanish: "Español",
        french: "Français",
        german: "Deutsch",
        chinese: "中文",
        
        howToPlayHeader: "How To Play",
        howToPlayText1: "Rivaldle is a trivia game inspired by Marvel Rivals. Guess the correct character in four different modes: Classic, Silhouette, Emoji, and Character Ability.",
        howToPlayText2: "New characters are featured daily and selected randomly with no repeats.",
        howToPlayText3: "Each mode can be accessed by clicking the mode boxes on the home page.",
        
        footerText1: "rivaldle.com — 2025",
        footerText2: "Marvel does not endorse or sponsor this project.",
        privacyPolicy: "Privacy Policy",
    },
    es: {
        title_header: "ADIVINA AL PERSONAJE DE MARVEL RIVALS",
        mode_classic: "Clásico",
        mode_silhouette: "Silueta",
        mode_emoji: "Emoji",
        mode_character_ability: "Habilidad de Personaje",
        
        aboutHeader: "Sobre Nosotros",
        aboutText1: "Rivaldle fue creado por dos estudiantes de informática apasionados por la programación y con ganas de mejorar sus habilidades a través de un proyecto colaborativo. Como fanáticos de Marvel de toda la vida, hemos pasado horas disfrutando de Marvel Rivals, lo que nos inspiró a desarrollar este juego de trivia.",
        aboutText2: "También nos inspiramos en Smashdle, un juego de trivia en línea basado en Super Smash Bros. Con Rivaldle, queremos crear una experiencia inmersiva para los fans de Marvel.",
        aboutText3: "¿Comentarios? Envíanos un correo a",
        
        languageHeader: "Selecciona tu idioma",
        languagePrompt: "Elige un idioma para cambiar el idioma del sitio:",
        english: "Inglés",
        spanish: "Español",
        french: "Francés",
        german: "Alemán",
        chinese: "Chino",
        
        howToPlayHeader: "Cómo Jugar",
        howToPlayText1: "Rivaldle es un juego de trivia inspirado en Marvel Rivals. Adivina el personaje correcto en cuatro modos diferentes: Clásico, Silueta, Emoji y Habilidad de Personaje.",
        howToPlayText2: "Se presentan nuevos personajes todos los días y se seleccionan al azar sin repeticiones.",
        howToPlayText3: "Cada modo se puede acceder haciendo clic en las cajas de modo en la página de inicio.",
        
        footerText1: "rivaldle.com — 2025",
        footerText2: "Marvel no respalda ni patrocina este proyecto.",
        privacyPolicy: "Política de Privacidad",
    },

    fr: {
        title_header: "DEVINEZ LE PERSONNAGE MARVEL RIVALS",
        mode_classic: "Classique",
        mode_silhouette: "Silhouette",
        mode_emoji: "Emoji",
        mode_character_ability: "Capacité du personnage",

        aboutHeader: "À propos de nous",
        aboutText1: "Rivaldle a été créé par deux étudiants en informatique passionnés de programmation et désireux d'approfondir leurs compétences grâce à un projet collaboratif. En tant que fans de Marvel depuis toujours, nous avons passé d'innombrables heures à jouer à Marvel Rivals, ce qui nous a inspirés pour développer ce jeu-questionnaire.",
        aboutText2: "Nous nous sommes également inspirés de Smashdle, un jeu-questionnaire en ligne basé sur Super Smash Bros. Avec Rivaldle, nous visons à créer une expérience immersive pour les fans de Marvel.",
        aboutText3: "Des commentaires ? Envoyez-nous un e-mail à",

        languageHeader: "Sélectionnez votre langue",
        languagePrompt: "Choisissez une langue pour changer la langue du site :",
        english: "Anglais",
        spanish: "Espagnol",
        french: "Français",
        german: "Allemand",
        chinese: "Chinois",

        howToPlayHeader: "Comment jouer",
        howToPlayText1: "Rivaldle est un jeu-questionnaire inspiré de Marvel Rivals. Devinez le personnage correct dans quatre modes différents : Classique, Silhouette, Emoji et Capacité du personnage.",
        howToPlayText2: "De nouveaux personnages sont présentés chaque jour et sélectionnés au hasard sans répétition.",
        howToPlayText3: "Chaque mode peut être accédé en cliquant sur les cases de mode sur la page d'accueil.",

        footerText1: "rivaldle.com — 2025",
        footerText2: "Marvel ne soutient ni ne sponsorise ce projet.",
        privacyPolicy: "Politique de confidentialité",
    },

    de: {
        title_header: "RATE DEN MARVEL RIVALS CHARAKTER",
        mode_classic: "Klassisch",
        mode_silhouette: "Silhouette",
        mode_emoji: "Emoji",
        mode_character_ability: "Charakterfähigkeit",

        aboutHeader: "Über uns",
        aboutText1: "Rivaldle wurde von zwei Informatikstudenten erstellt, die leidenschaftlich an Programmierung interessiert sind und ihre Fähigkeiten durch ein gemeinsames Projekt vertiefen möchten. Als lebenslange Marvel-Fans haben wir unzählige Stunden damit verbracht, Marvel Rivals zu spielen, was uns dazu inspiriert hat, dieses Quizspiel zu entwickeln.",
        aboutText2: "Wir haben uns auch von Smashdle inspirieren lassen, einem Online-Quizspiel basierend auf Super Smash Bros. Mit Rivaldle wollen wir eine immersive Erfahrung für Marvel-Fans schaffen.",
        aboutText3: "Feedback? Schicken Sie uns eine E-Mail an",

        languageHeader: "Wählen Sie Ihre Sprache",
        languagePrompt: "Wählen Sie eine Sprache, um die Sprache der Seite zu ändern:",
        english: "Englisch",
        spanish: "Spanisch",
        french: "Französisch",
        german: "Deutsch",
        chinese: "Chinesisch",

        howToPlayHeader: "Wie man spielt",
        howToPlayText1: "Rivaldle ist ein Quizspiel, das von Marvel Rivals inspiriert ist. Rate den richtigen Charakter in vier verschiedenen Modi: Klassisch, Silhouette, Emoji und Charakterfähigkeit.",
        howToPlayText2: "Jeden Tag werden neue Charaktere vorgestellt, die zufällig ohne Wiederholungen ausgewählt werden.",
        howToPlayText3: "Jeder Modus kann auf der Startseite durch Klicken auf die Modus-Boxen aufgerufen werden.",

        footerText1: "rivaldle.com — 2025",
        footerText2: "Marvel unterstützt oder sponsert dieses Projekt nicht.",
        privacyPolicy: "Datenschutzrichtlinie",
    },

    zh: {
        title_header: "猜测MARVEL RIVALS角色",
        mode_classic: "经典",
        mode_silhouette: "轮廓",
        mode_emoji: "表情符号",
        mode_character_ability: "角色能力",

        aboutHeader: "关于我们",
        aboutText1: "Rivaldle由两位计算机科学学生创建，他们热衷于编程，并渴望通过合作项目提升自己的技能。作为终身的Marvel粉丝，我们花费了无数小时享受Marvel Rivals，这激励我们开发了这个问答游戏。",
        aboutText2: "我们还受到了Smashdle的启发，这是一款基于超级马里奥兄弟的在线问答游戏。通过Rivaldle，我们旨在为Marvel粉丝创造一个沉浸式的体验。",
        aboutText3: "反馈意见？给我们发电子邮件至",

        languageHeader: "选择您的语言",
        languagePrompt: "选择一种语言来更改站点语言：",
        english: "英语",
        spanish: "西班牙语",
        french: "法语",
        german: "德语",
        chinese: "中文",

        howToPlayHeader: "如何玩",
        howToPlayText1: "Rivaldle是一款受Marvel Rivals启发的问答游戏。通过四种不同的模式：经典、轮廓、表情符号和角色能力，猜测正确的角色。",
        howToPlayText2: "每天都会有新的角色出现，并随机选择，不会重复。",
        howToPlayText3: "每个模式都可以通过点击主页上的模式框来访问。",

        footerText1: "rivaldle.com — 2025",
        footerText2: "Marvel不支持或赞助此项目。",
        privacyPolicy: "隐私政策",
    }

    // Other languages...
};

class About {
    constructor() {
        this.initialize();
    }

    initialize() {
        this.getIcons();
        this.listenForClicks();
        this.aboutPopupIsActive = false;
        this.howToPlayPopupIsActive = false;
        this.languagePopupIsActive = false;

        // Load the selected language from localStorage when the page loads
        this.loadLanguage();
    }

    getIcons() {
        this.aboutIcon = document.getElementById('about_icon');
        this.howToPlayIcon = document.getElementById('how_to_play_icon');
        this.languageIcon = document.getElementById('language_icon');
    }

    getBody() {
        this.body = document.body;
    }

    listenForClicks() {
        // About icon click
        this.aboutIcon.addEventListener('click', () => {
            this.appendOverlay();
            this.showAboutContainer();
            this.aboutPopupIsActive = true;
        });

        // How To Play icon click
        this.howToPlayIcon.addEventListener('click', () => {
            this.appendOverlay();
            this.showHowToPlayContainer();
            this.howToPlayPopupIsActive = true;
        });

        // Language icon click
        this.languageIcon.addEventListener('click', () => {
            this.appendOverlay();
            this.showLanguageContainer();
            this.languagePopupIsActive = true;
        });
    }

    appendOverlay() {
        this.getBody();
        this.darkOverlay = document.createElement('div');
        this.darkOverlay.className = 'overlay';
        this.darkOverlay.style.zIndex = '999';
        document.body.style.overflowY = 'hidden';
        document.documentElement.style.overflowY = 'hidden';
        this.body.append(this.darkOverlay);
    }

    removeOverlay() {
        this.darkOverlay.remove();
        document.body.style.overflowY = '';
        document.documentElement.style.overflowY = '';
    }

    getAboutContainer() {
        this.aboutContainer = document.getElementById('about_container');
    }

    getHowToPlayContainer() {
        this.howToPlayContainer = document.getElementById('how_to_play_container');
    }

    getLanguageContainer() {
        this.languageContainer = document.getElementById('language_container');
    }

    showAboutContainer() {
        this.getAboutContainer();
        this.aboutContainer.style.display = 'flex';
        this.listenForXClick();
    }

    showHowToPlayContainer() {
        this.getHowToPlayContainer();
        this.howToPlayContainer.style.display = 'flex';
        this.listenForXClick();
    }

    showLanguageContainer() {
        this.getLanguageContainer();
        this.languageContainer.style.display = 'flex';
        this.listenForXClick();
        this.listenForLanguageSelection();
    }

    removeContainer() {
        if (this.aboutPopupIsActive) {
            this.aboutContainer.style.display = 'none';
            this.aboutPopupIsActive = false;
        }
        if (this.howToPlayPopupIsActive) {
            this.howToPlayContainer.style.display = 'none';
            this.howToPlayPopupIsActive = false;
        }
        if (this.languagePopupIsActive) {
            this.languageContainer.style.display = 'none';
            this.languagePopupIsActive = false;
        }
    }

    listenForXClick() {
        const xIcons = document.querySelectorAll('.x_icon');
        xIcons.forEach((x) => {
            x.addEventListener('click', () => {
                this.removeOverlay();
                this.removeContainer();
            });
        });
    }

    listenForLanguageSelection() {
        const languageButtons = document.querySelectorAll('.language-button');
        languageButtons.forEach((button) => {
            button.addEventListener('click', (e) => {
                const selectedLanguage = e.target.dataset.lang;
                console.log("Selected Language: ", selectedLanguage); // Debugging line
                localStorage.setItem('language', selectedLanguage);
                this.updatePageContent(selectedLanguage);
                this.removeOverlay();
                this.removeContainer();
            });
        });
    }

    // Load language from localStorage
    loadLanguage() {
        const storedLanguage = localStorage.getItem('language') || 'en';  // Default to 'en' if no language is saved
        console.log("Stored Language on Load: ", storedLanguage); // Debugging line
        this.updatePageContent(storedLanguage);
    }

    updatePageContent(language) {
        const langData = translations[language];
        if (!langData) return;

        console.log("Applying Language: ", language); // Debugging line
        document.title = langData.title_header;  // Use title_header for the page title
        this.updateElement('title_header', langData.title_header);
        this.updateElement('mode_classic', langData.mode_classic);
        this.updateElement('mode_silhouette', langData.mode_silhouette);
        this.updateElement('mode_emoji', langData.mode_emoji);
        this.updateElement('mode_character_ability', langData.mode_character_ability);
        this.updateElement('aboutHeader', langData.aboutHeader);
        this.updateElement('aboutText1', langData.aboutText1);
        this.updateElement('aboutText2', langData.aboutText2);
        this.updateElement('aboutText3', langData.aboutText3);
        this.updateElement('languageHeader', langData.languageHeader);
        this.updateElement('languagePrompt', langData.languagePrompt);
        this.updateElement('english', langData.english);
        this.updateElement('spanish', langData.spanish);
        this.updateElement('french', langData.french);
        this.updateElement('german', langData.german);
        this.updateElement('chinese', langData.chinese);
        this.updateElement('howToPlayHeader', langData.howToPlayHeader);
        this.updateElement('howToPlayText1', langData.howToPlayText1);
        this.updateElement('howToPlayText2', langData.howToPlayText2);
        this.updateElement('howToPlayText3', langData.howToPlayText3);
        this.updateElement('footerText1', langData.footerText1);
        this.updateElement('footerText2', langData.footerText2);
        this.updateElement('privacyPolicy', langData.privacyPolicy);
    }

    updateElement(id, value) {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = value;
        } else {
            console.warn(`Element with ID "${id}" not found.`);
        }
    }
}

const about = new About();
